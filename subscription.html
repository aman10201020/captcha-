<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Subscription</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Specific styles for subscription page */
        .plan-card {
            background: #3c3e53;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: 0.3s;
        }
        .plan-card.highlight {
            border-color: #8e2de2;
            box-shadow: 0 0 15px rgba(142, 45, 226, 0.5);
        }
        .plan-card h3 {
            font-size: 24px;
            color: #8e2de2;
            margin-bottom: 5px;
        }
        .plan-card .price {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .plan-card .reward {
            font-size: 16px;
            color: lightgreen;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .plan-card .submit-btn {
            background: linear-gradient(to right, #8e2de2, #4a00e0);
            padding: 12px;
        }
        .plan-card .submit-btn:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header" style="justify-content: center; margin-bottom: 40px;">
            <button class="profile-btn">‚ú® Subscription Plans</button>
        </header>

        <main class="captcha-solver-card" style="padding: 40px;">
            <h2 style="margin-bottom: 25px;">üöÄ Choose Your Plan</h2>
            <p id="statusMsg" style="color: #ffc107; margin-bottom: 20px;"></p>
            
            <div class="plan-card" data-price="99" data-reward="5" data-name="Basic">
                <h3>Basic Plan</h3>
                <p class="price">‚Çπ99</p>
                <p>One-Time Fee</p>
                <hr style="border-color: #4a00e0; margin: 15px 50px;">
                <p class="reward">üí∞ ‚Çπ5 per Captcha</p>
                <button class="submit-btn buy-btn" data-plan="5">Buy Now</button>
            </div>

            <div class="plan-card highlight" data-price="149" data-reward="7" data-name="Pro">
                <h3>Pro Plan</h3>
                <p class="price">‚Çπ149</p>
                <p>One-Time Fee (Recommended)</p>
                <hr style="border-color: #4a00e0; margin: 15px 50px;">
                <p class="reward">üí∞ ‚Çπ7 per Captcha</p>
                <button class="submit-btn buy-btn" data-plan="7">Buy Now</button>
            </div>

            <div class="plan-card" data-price="249" data-reward="15" data-name="Premium">
                <h3>Premium Plan</h3>
                <p class="price">‚Çπ249</p>
                <p>One-Time Fee</p>
                <hr style="border-color: #4a00e0; margin: 15px 50px;">
                <p class="reward">üí∞ ‚Çπ15 per Captcha</p>
                <button class="submit-btn buy-btn" data-plan="15">Buy Now</button>
            </div>
        </main>
    </div>

    <div class="bottom-nav">
        <a href="index.html" class="nav-item">
            <i class="fa-solid fa-house">üè†</i>
            <span>Home</span>
        </a>
        
        <a href="history.html" class="nav-item">
            <i class="fa-solid fa-clock-rotate-left">‚è±Ô∏è</i>
            <span>History</span>
        </a>

        <a href="subscription.html" class="nav-item" style="color: #8e2de2;">
            <i class="fa-solid fa-star">‚ú®</i>
            <span>Plans</span>
        </a>

        <a href="profile.html" class="nav-item">
            <i class="fa-solid fa-user">üë§</i>
            <span>Profile</span>
        </a>

        <a href="index.html#chatOverlay" class="nav-item">
            <i class="fa-solid fa-message">üí¨</i>
            <span>Support</span>
        </a>
    </div>

    <script>
        const buyButtons = document.querySelectorAll('.buy-btn');
        const statusMsg = document.getElementById('statusMsg');

        document.addEventListener('DOMContentLoaded', () => {
            const currentRate = localStorage.getItem('captchaRewardRate') || '5';
            const isSubscribed = localStorage.getItem('isSubscribed') === 'true';

            if (isSubscribed) {
                statusMsg.textContent = `‚úÖ Your subscription is ACTIVE! You currently earn ‚Çπ${currentRate} per captcha.`;
                statusMsg.style.color = 'lightgreen';
            } else {
                statusMsg.textContent = 'Choose a plan below to start earning unlimited money! The Basic plan (‚Çπ5/Captcha) is the same as the Free Trial.';
                statusMsg.style.color = '#ffc107';
            }
        });

        buyButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const rewardRate = e.target.dataset.plan;
                const card = e.target.closest('.plan-card');
                const planPrice = card.dataset.price;
                const planName = card.dataset.name;

                // ‡§®‡§è ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§™‡•ç‡§∞‡•Ç‡§´ ‡§™‡•á‡§ú ‡§™‡§∞ ‡§™‡•ç‡§≤‡§æ‡§® ‡§ï‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤‡•ç‡§∏ ‡§™‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç
                window.location.href = `payment_proof.html?price=${planPrice}&rate=${rewardRate}&name=${planName}`;
            });
        });
    </script>
</body>
</html>